# 🦖 인프런 운영체제 공룡책 강의

## Section 3

### 쓰레드

- 경량화 프로세스 (a lightweight process)
- CPU 작업의 단위
- 하나의 쓰레드는 thread ID, PC, register set, stack 를 가지고 있다.
- 하나의 프로세스에 여러 쓰레드가 존재하면 code,data,files 영역은 공유해서 사용한다.
- 멀티쓰레드 프로그래밍의 장점
    - 스레드에 작업을 넘겨주고 논블로킹하게 동작할 수 있다.
    - 프로세스의 자원을 공유한다.
    - 프로세스의 생성비용과 컨텍스트 스위칭 비용에 비해 효율적이다.
    - 확장성이 좋다.
- 코어의 개수에 따른 쓰레드
    - CPU 코어가 싱글코어라면 interleaved 하게 동작 (시분할, timesharing 방식으로 동작, Concurrency)
    - 멀티코어라면 병렬적으로 쓰레드들을 실행할 수 있다. (Parallel)
        - 멀티코어에서의 주의해야 할 부분
            - 병렬적으로 실행하다보니 데이터 동기화, 실행순서 유지가 필요한 작업들을 적절한 스레드에게 분배하는 스케줄링, ... 고려가 필요하다.
- 쓰레드의 두 종류
    - user threads : 사용자 모드에서 사용하는 스레드 ( 커널의 지원없이 관리 )
    - kernel threads : 커널 모드에서 사용하는 스레드 ( 운영체제가 관리 )

### Amdalhl's 법칙

- 코어는 무조건 많을수록 좋은가 ?
    - speed <= 1 / ( S + ( (1-S) / N ) )
        - S : serially 하게 동작해야 하는 부분 (순서가 중요한 작업들)
        - N : 프로세스 코어의 개수
    - 모든 작업이 병렬 처리가 가능한 경우가 아니라면 무조건 많은 게 좋다고 할 수 없다.

### 쓰레드 라이브러리
- POSIX Pthreads
- Windows thread
- Java thread

### Implicit Threading
- 병렬,동시성을 제공하는 스레드를 관리하기란 어렵다. -> 사용자가 스레드를 관리하는 것이 아닌 컴파일러와 런타임 라이브러리를 사용해서 해결한다.
- Thread Pools : 스레드풀에 미리 스레드를 생성해놓고 관리 
- Fork & Join : fork(),join() 매커니즘을 활용해서 구현되어 있다.
- OpenMP : 컴파일러 지시어 API를 활용해서 C/C++ 프로그래밍에서 병렬처리, 동시성제어 기능을 지원한다.
- Grand Central Dispatch(GCD) : 애플에서 MAC OS,IOS 에서 사용