# ðŸ¦– ì¸í”„ëŸ° ìš´ì˜ì²´ì œ ê³µë£¡ì±… ê°•ì˜

## Section 8

### Main Memory

- ë©”ëª¨ë¦¬ ê³µê°„
    - ë² ì´ìŠ¤ ë ˆì§€ìŠ¤í„°(base register)ì™€ ì œí•œ ë ˆì§€ìŠ¤í„°(limit register)ë¥¼ ì‚¬ìš©í•´ì„œ í”„ë¡œì„¸ìŠ¤ ê°„ êµ¬ì—­ì„ êµ¬ë¶„í•  ìˆ˜ ìžˆë‹¤.
- Address Binding
    - ì£¼ì†Œ ë°”ì¸ë”©
    - í”„ë¡œê·¸ëž¨ì˜ ì‹¤í–‰ íŒŒì¼ì´ ë©”ëª¨ë¦¬ì— ì €ìž¥ë  ë•ŒëŠ” ìš´ì˜ì²´ì œ ì»¤ë„ì´ ê´€ë¦¬í•´ì¤€ë‹¤.
    - source program(í˜„ìž¬, ë…¼ë¦¬ ì£¼ì†Œ) -> ì»´íŒŒì¼ëŸ¬ -> object file(ëª©ì  íŒŒì¼) -> ë§ì»¤ -> executable file(ì‹¤í–‰ íŒŒì¼) -> ë¡œë” -> program in
      memory(ë¬¼ë¦¬ ì£¼ì†Œì— ì €ìž¥)
    - user processê°€ ê°–ê³  ìžˆëŠ” ë…¼ë¦¬ ì£¼ì†Œë¥¼ ë©”ëª¨ë¦¬ì— ì €ìž¥í•˜ê¸° ìœ„í•œ ë¬¼ë¦¬ ì£¼ì†Œì— ë§¤í•‘í•´ì•¼ í•œë‹¤.
- MMU (Memory Management Unit)
    - í•˜ë“œì›¨ì–´ ìž¥ì¹˜
    - ë…¼ë¦¬ì£¼ì†Œë¥¼ ë¬¼ë¦¬ì£¼ì†Œë¡œ ë³€í™˜í•´ì£¼ëŠ” ìž¥ì¹˜
    - relocation register(MMUì—ì„œ ë² ì´ìŠ¤ ë ˆì§€ìŠ¤í„° ì—­í• )
- Dynamic Loading
    - ë©”ëª¨ë¦¬ ì´ìš©ì„ íš¨ìœ¨ì ìœ¼ë¡œ í•˜ê¸° ìœ„í•´ í•„ìš”í•  ë•Œì—ë§Œ ë£¨í‹´ì„ ë¡œë“œ ì‹œí‚¨ë‹¤.
    - relocatable linking loaderê°€ í˜¸ì¶œëœ ë£¨í‹´ì´ ë¡œë“œë ë•Œì—ë§Œ í”„ë¡œê·¸ëž¨ ì£¼ì†Œ í…Œì´ë¸”ì— ë³€ê²½ì‚¬í•­ì„ ë°˜ì˜í•´ì¤€ë‹¤.
- Dynamic Linking and Shared Libraries
    - DLLs: Dynamically Linked Libraries
        - `í”„ë¡œê·¸ëž¨ì´ ì‹¤í–‰ ë  ë•Œ` ì‹œìŠ¤í…œ ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ ìœ ì € í”„ë¡œê·¸ëž¨ì„ ë§í‚¹í•´ì¤€ë‹¤.
        - static linking : ì‹œìŠ¤í…œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë¡œë”ê°€ ë°”ì´ë„ˆë¦¬ì½”ë“œë¡œ ë§Œë“¤ì–´ ë¬¼ë¦¬ì£¼ì†Œì— ì €ìž¥í•´ë†“ëŠ” ê²ƒ
        - dynamic linking : ë§í‚¹ì„ ì‹¤í–‰ ì‹œê¹Œì§€ ì§€ì—°í•´ë†“ê³  ì‹¤í–‰í•˜ëŠ” ì¤‘ì— DLL íŒŒì¼ì— ì ‘ê·¼í•´ì„œ ë§í‚¹
        - shared library : ë©”ì¸ ë©”ëª¨ë¦¬ì— DLL ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì €ìž¥í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ (ìœˆë„ìš°:.dllíŒŒì¼(dynamic linking library), ë¦¬ëˆ…ìŠ¤:.soíŒŒì¼)
- ë©”ëª¨ë¦¬ í• ë‹¹
    - ì—°ì† ë©”ëª¨ë¦¬ í• ë‹¹
        - ìš´ì˜ì²´ì œ ë˜ëŠ” ìœ ì € í”„ë¡œì„¸ìŠ¤ë¥¼ ìœ„í•œ ë©”ëª¨ë¦¬ ê³µê°„ì„ ì—°ì†ì ìœ¼ë¡œ í• ë‹¹(a single section of memory)
        - ë©”ëª¨ë¦¬ ë³´í˜¸(ë‹¤ë¥¸ ê³µê°„ì„ ì¹¨ë²”í•˜ì§€ ì•Šë„ë¡ í•˜ê¸°) : relocation register + limit register ê°’ìœ¼ë¡œ ì˜ì—­ì„ êµ¬ë¶„
        - ë©”ëª¨ë¦¬ë¥¼ ì‚¬ìš©í•˜ê³  ë°˜í™˜í•˜ëŠ” ê³¼ì •ì´ ë°˜ë³µë˜ë©´ì„œ ì‚¬ìš©ì¤‘ì¸ ë©”ëª¨ë¦¬ ì‚¬ì´ì‚¬ì´ì— ë¹ˆ ê³µê°„ì´ ì¡´ìž¬
            - ì–´ë–¤ ë¹ˆ ê³µê°„ì— ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹í•˜ëŠ” ê²ƒì´ ì¢‹ì„ì§€
                - First-Fit: ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹í•  ìˆ˜ ìžˆëŠ” ë¹ˆ ê³µê°„ì— ë°”ë¡œ í• ë‹¹
                - Best-Fit : ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹í•  ìˆ˜ ìžˆëŠ” ë¹ˆ ê³µê°„ ì¤‘ ê°€ìž¥ ìž‘ì€ ê³µê°„ì— í• ë‹¹
                - Worst-Fit : ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹í•  ìˆ˜ ìžˆëŠ” ë¹ˆ ê³µê°„ ì¤‘ ê°€ìž¥ í° ê³³ë¶€í„° í• ë‹¹
        - ì™¸ë¶€ ë‹¨íŽ¸í™” : ìž‘ì€ í¬ê¸°ì˜ ë©”ëª¨ë¦¬ ê³µê°„ì´ ë§Žì´ ë°œìƒí•˜ê²Œ ë˜ì–´ ì¶©ë¶„í•œ ë©”ëª¨ë¦¬ ê³µê°„ì´ ìžˆìŒì—ë„ í• ë‹¹í•  ìˆ˜ ì—†ê²Œ ëœë‹¤. ì™¸ë¶€ ë‹¨íŽ¸í™”ë¡œ ì¸í•œ ë¬¸ì œ
        - ë‚´ë¶€ ë‹¨íŽ¸í™” : íŽ˜ì´ì§• ë˜ëŠ” ì¼ì •í•œ í¬ê¸°ì˜ ë©”ëª¨ë¦¬ë¡œ ìª¼ê°œ í• ë‹¹í•˜ë‹¤ë³´ë©´ ë©”ëª¨ë¦¬ë¥¼ ë‹¤ ì‚¬ìš©í•˜ì§€ ì•Šì§€ë§Œ í• ë‹¹ë˜ì–´ ë¹ˆ ê³µê°„ì´ ë°œìƒ, ê·¸ ê³µê°„ì„ ë‚´ë¶€ ë‹¨íŽ¸í™”ê°€ ë°œìƒí–ˆë‹¤ê³  í•œë‹¤.
    - Paging, íŽ˜ì´ì§•
        - ë¬¼ë¦¬ ì£¼ì†Œë¥¼ ì—°ì†ì ì¸ ê³µê°„ì— í• ë‹¹í•˜ì§€ ì•Šìœ¼ë©´ì„œ ë©”ëª¨ë¦¬ë¥¼ ê´€ë¦¬í•˜ëŠ” ë°©ì‹
        - ì™¸ë¶€ ë‹¨íŽ¸í™” ë¬¸ì œë¥¼ í•´ê²°í•˜ê³  ì—°ì† ë©”ëª¨ë¦¬ í• ë‹¹ì—ì„œì˜ ì••ì¶•ì´ í•„ìš”í–ˆë˜ ë¶€ë¶„ì„ í”¼í•  ìˆ˜ ìžˆë‹¤.
        - ê³ ì •ëœ ë¸”ë¡ ì‚¬ì´ì¦ˆ(`í”„ë ˆìž„`)ë¡œ ë¬¼ë¦¬ ì£¼ì†Œë¥¼ ë‚˜ëˆ„ê³  ë™ì¼í•œ ì‚¬ì´ì¦ˆë¡œ ë‚˜ë‰˜ì–´ì§„ ë¸”ë¡(`íŽ˜ì´ì§€`)ì˜ ë…¼ë¦¬ ë©”ëª¨ë¦¬ì™€ ë§¤í•‘
            - a page number, page offset ìœ¼ë¡œ ë…¼ë¦¬ ì£¼ì†Œ í‘œí˜„
                - ê° íŽ˜ì´ì§€ë§ˆë‹¤ page tableì´ ì¡´ìž¬í•˜ê³  page tableì€ ë…¼ë¦¬ì ì¸ ì£¼ì†Œì¸ page numberê°€ ë¬¼ë¦¬ ë©”ëª¨ë¦¬ ì£¼ì†Œì—ì„œëŠ” ì–´ë””ì— ìžˆëŠ”ì§€(í”„ë ˆìž„ ë²ˆí˜¸) index í•˜ê³  ìžˆë‹¤.
        - íŽ˜ì´ì§€ì˜ size
            - í•˜ë“œì›¨ì–´ì— ì˜í•´ ì •ì˜ëœë‹¤.
            - 2ì˜ ë°°ìˆ˜ë©´ì„œ, 4KB ì´ìƒ 1GB ì´í•˜ì˜ í¬ê¸°ë¡œ ì£¼ë¡œ ì •í•˜ê³  ìžˆë‹¤.
            - logical address space ê°€ 2^m ì´ë©´ì„œ, page size ê°€ 2^n ì´ë¼ë©´
                - m-n ë¹„íŠ¸ í¬ê¸°ì˜ page number, n ë¹„íŠ¸ì˜ page offset
        - PTBR(page-table base register)
            - íŽ˜ì´ì§€ í…Œì´ë¸”ì˜ í¬ì¸í„° ë ˆì§€ìŠ¤í„°
            - ë©”ì¸ ë©”ëª¨ë¦¬ì— íŽ˜ì´ì§€ í…Œì´ë¸”ì„ ì €ìž¥
            - context switching ë¹ ë¥´ê³ , memory access time ì—¬ì „ížˆ ëŠë¦¬ë‹¤.
            - 2ë²ˆì˜ memory access ë°œìƒ ( íŽ˜ì´ì§€ í…Œì´ë¸” ì ‘ê·¼ 1íšŒ + íŽ˜ì´ì§€ í…Œì´ë¸”ì˜ ì •ë³´ë¥¼ í† ëŒ€ë¡œ ë©”ì¸ ë©”ëª¨ë¦¬ì— ì ‘ê·¼ 1íšŒ = ì´ 2íšŒ)
        - TLB(Translation Look-aside Buffer)
            - page numberì™€ frame numberë¥¼ ë§¤í•‘ ì •ë³´ë¥¼ ìºì‹±í•˜ê³  ìžˆëŠ” í•˜ë“œì›¨ì–´(ìºì‹± ë©”ëª¨ë¦¬)
            - TLB hit,miss ì˜ ë¹„ìœ¨ì— ë”°ë¼ ë©”ëª¨ë¦¬ ì ‘ê·¼ íš¨ìœ¨ì´ ë‹¬ë¼ì§„ë‹¤.
        - íŽ˜ì´ì§•ì—ì„œì˜ ë©”ëª¨ë¦¬ ë³´í˜¸
            - valid-invalid bit : íŽ˜ì´ì§€ í…Œì´ë¸”ì—ì„œ í•´ë‹¹ íŽ˜ì´ì§€ì˜ ì‚¬ìš© ê°€ëŠ¥ ì—¬ë¶€ë¥¼ ì €ìž¥
                - valid ë¼ë©´, íŽ˜ì´ì§€ í…Œì´ë¸”ì„ ë³´ë‹ˆ í•´ë‹¹ íŽ˜ì´ì§€ëŠ” í”„ë¡œì„¸ìŠ¤ì˜ ë…¼ë¦¬ ì£¼ì†Œ ê³µê°„ì´ë‹¤ (legal)
                - invalid ë¼ë©´, íŽ˜ì´ì§€ í…Œì´ë¸”ì„ ë³´ë‹ˆ í•´ë‹¹ íŽ˜ì´ì§€ëŠ” í”„ë¡œì„¸ìŠ¤ì˜ ë…¼ë¦¬ ì£¼ì†Œ ê³µê°„ì´ ì•„ë‹ˆë‹¤(illegal)
                - illegal ì£¼ì†Œë¼ë©´ valid-invalid bit ë¥¼ ë³´ê³  trapped ë°œìƒ
        - Shared Pages
            - ìˆ˜ì •ë˜ì§€ ì•Šê³  ê³µìœ ë  ìˆ˜ ìžˆëŠ” ì½”ë“œë“¤ì„ ìœ„í•´ ê³µìœ ë˜ëŠ” íŽ˜ì´ì§€
    - Swapping
        - ì‹œìŠ¤í…œì˜ ë¬¼ë¦¬ì£¼ì†Œ í¬ê¸°ë³´ë‹¤ í° í”„ë¡œê·¸ëž¨ë„ ì‹¤í–‰í•  ìˆ˜ ìžˆê²Œ ë§Œë“¤ ìˆ˜ ìžˆë‹¤.
        - ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” íŽ˜ì´ì§€ëŠ” ë©”ëª¨ë¦¬ì—ì„œ out, í•„ìš”í•  ë•Œ ë‹¤ì‹œ ë©”ëª¨ë¦¬ë¡œ ë¶ˆëŸ¬ì„œ ì‚¬ìš©
        - íŽ˜ì´ì§€ ë‹¨ìœ„ë¡œ ìŠ¤ì™‘ ì§„í–‰
        - main memory -> backing store : swap out(=page out), backing store -> main memory : swap in(=page in)