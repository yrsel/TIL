## 객체지향의 사실과 오해

### 조영호 지음

---

### 읽기 전 : 객체지향이란 무엇인가요 ? 

- 객체지향이란 관련있는 작업을 내포하고 있는 객체가 존재하고 그 객체들간의 의사소통으로 문제를 해결하는 것이라고 생각한다.

### 1장 협력하는 객체들의 공동체 

- 객체지향에서 가장 중요한 세 가지 개념
  - `역할` 과 `책임` 그리고 `협력`
- 특정한 역할을 맡는다면 반드시 그에 따른 책임이 있음을 암시한다.
- 객체지향에서 적절한 책임을 적절한 객체에게 할당하는 것에서 시작된다.
  - 역할은 관련성 높은 책임의 집합이라고 할 수 있다.
  - 객체의 역할은 다음과 같은 특징들이 있다.
    - 여러 객체가 동일한 역할을 수행할 수 있다. ( 대체 가능성 )
    - 역할은 대체 가능성을 의미한다. ( 다형성, 추상화 )
    - 객체는 책임을 수행하는 방법을 자율적으로 선택할 수 있다. ( 다형성을 의미한다. )
    - 하나의 객체가 동시에 여러 역할을 수행할 수 있다. ( 다양한 메서드를 지원한다. )
- 객체지향 설계의 묘미는 다른 객체와 조화롭게 협력할 수 있을 만큼 충분히 `개방적이다.`  
  그리고 동시에 협력에 참여하는 방법을 스스로 결정할 수 있을 만큼 충분히 `자율적인` 객체들의 공동체로서 설계하는 것이다.
  - 적당한 응집도와 적당한 결합도를 갖는 객체 설계를 의미하는 것 같다.
- 객체는 다른 객체가 '무엇'을 수행하는 지는 알 수 있지만 '어떻게' 수행하는 지는 알 수 없어야 한다.
    - 수행할 객체는 수행할 행동에 필요한 상태를 알고 행동을 수행하는 방법을 스스로 결정할 수 있어야 한다.
- 객체는 `상태`와 `행동`을 하나의 단위로 묶는 자율적인 존재다.
- 객체지향 세계에서는 `메시지`를 통해 요청을 송신하고 수신한다.
  - 책에서의 예시로 캐셔가 바리스타에게 커피 제조를 요청하는 것이 `메시지`이고 커피 제조하는 구체적인 방법이 `메서드`라고 표현하였다.
- 객체지향에서 중요한 것은 단지 클래스가 아니다.
  - 연관된 개념의 책임들로 구성된 역할과 그 역할들이 메시지를 주고받으면서 적절하게 협력하는 것이 중요하다고 강조한다. 

### 2장 이상한 나라의 객체

- 상태와 행동
  - 행동을 통해서 상태를 변화시킨다.
- 객체의 행동으로 발생하는 효과
  - 객체 자신의 상태 변경
  - 행동 내에서 협력하는 다른 객체에 대한 메시지 전송
- 상태를 잘 정의된 행동 집합 뒤로 캡슐화 하는 것은 객체의 자율성을 높이고 협력을 단순하고 유연하게 만든다.
  - 객체는 상호작용하는 다른 객체에게 메시지만 전달할 뿐, 다른 객체 내부에서 어떤 일을 하는지는 알 수 없다. 
    -  요청한 메시지를 잘 수행했을 거라는 믿음으로 메시지만 전달하는 것 
- 값과 객체의 가장 큰 차이 -> 식별자의 유무
  - 값은 상태의 동등성으로 값의 일치여부를 판단한다
  - 객체는 식별자 기반으로 동일성을 판단해 객체의 일치여부를 판단한다. (객체의 가변적인 성격으로 동등성만으론 일치여부를 판단할 수 없다.)
- 일반적으로 객체의 상태를 조회하는 작업을 `쿼리` , 객체의 상태를 변경하는 작업을 `명령` 이라고 한다.
  - CQRS(Command Query Responsibility Separation) 패턴 : 쿼리와 명령을 구분하는 디자인 패턴 (조회 로직과 변경 로직을 구분하는 패턴을 의미한다.)
- 객체 설계할 때 `상태를 먼저 결정`하고 `행동을 나중에 결정하는 방법`은 설계에 `나쁜 영향`을 끼친다. 
  - 상태를 먼저 결정할 경우 캡슐화가 저해된다.
  - 객체를 협력자가 아닌 고립된 섬으로 만든다.
  - 객체의 재사용성이 저하된다.
- 객체지향 설계는 애플리케이션 구성에 필요한 `협력을 생각하고` 협력에 참여하는 데 `필요한 행동`을 생각한 후 행동을 `수행할 객체를 선택`하는 방식으로 수행된다.
  - 상태는 행동을 결정하고 난 후 행동에 적절한 상태를 선택해야한다.

### 3장 타입과 추상화

- 추상화의 목적 : 복잡성을 이해하기 쉬운 수준으로 단순화하는 것 
  - 구체적인 사물들 간의 공통점을 취하고 차이점은 버리는 일반화를 통해 단순화한다.
  - 중요한 부분을 강조하기 위해 불필요한 세부사항은 제거하여 단순화한다.
- 개념의 세 가지 관점
  - 심볼 : 개념을 가리키는 간략한 이름이나 명칭 (ex, 책,모니터,텀블러,...)
  - 내연 : 개념의 `완전한 정의`를 나타내며 내연의 의미를 이용해 객체가 개념에 속하는지 여부를 확인할 수 있다.
  - 외연 : 개념에 속하는 모든 객체의 집합 (ex, 심볼이 책이라면, 전문서적, 동화책, 소설 등 외연에 속한다.)
- 분류(classification)란, 특정한 객체를 특정 개념의 객체 집합에 포함시키거나 포함시키지 않는 작업을 의미한다.
- 타입 또한 개념의 일종이라고 할 수 있다.
  - 타입은 데이터(상태)가 아닌 행동에 의해 결정된다. ( 객체는 데이터가 아니라, 행동에 의해 결정된다. )
- 일반화와 특수화, 슈퍼타입과 서브타입
  - 일반화는 더 큰 범주, 특수화는 일반화의 행동을 모두 수행할 수 있으면서 추가적인 행동 또한 수행할 수 있는 경우
  - 슈퍼타입(더 일반적인 타입), 서브타입 (일반적인 타입의 행동을 모두 충족하면서 추가행동을 수행할 수 있는 타입)
- 클래스는 타입을 구현하기 위해 프로그래밍 언어에서 제공하는 하나의 구현 매커니즘이다.
  - 클래스 != 타입 